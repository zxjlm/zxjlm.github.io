---
title: thread-coroutine-revisit
date: 2021-04-05 21:29:11
tags:
---

进程\线程\协程

在 [python 爬虫复习(2) 提高效率](https://blog.harumonia.moe/2020-01-08-spider-review-2-Improve-efficiency/), 提供过三种爬虫方法的对比.

线程

- 内核支持线程(Kernel Support Thread)
- 用户级线程
- 组合方式线程

### KST

主要发生在内核态中,管理\调度由内核完成.与操作系统本身使用的线程等价.

特点:

- 调度灵活
- 内核线程切换成本高
  逻辑集中在用户态,而运行发生在内核态,导致实际使用时频繁地在用户态和内核态之间切换

Java

### 用户级线程

创建\销毁\线程通信都发生在用户态,不需要内核态的支持.不需要频繁切换,所以切换成本低.

- 由用户*自行调度*,内核无法干涉
- if 对应的内核级线程阻塞 -> 所有用户级线程无法运行

JavaScript

### 组合方式线程

组合 KST 和 用户级线程

Golang\Python

## 进程和线程的上下文切换

- 寄存器级
- 用户级

07:05
