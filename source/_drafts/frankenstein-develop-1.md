---
title: Frankenstein开发记录(1)
author: harumonia
categories:
  - 源流清泉
  - Python
tags:
  - dailyTools
customSummary:
noThumbInfoStyle: default
outdatedNotice: no
thumb:
thumbChoice: default
thumbSmall:
thumbStyle: default
hidden: false
---

`Frankenstein` 是用来搜索可用数据源的一个小工具,它包含两个主要功能

1. 友链扫描
2. 关键字扫描

这两个部分本质上都是对现存的数据源进行遍历搜索，区别在于二者的扫描侧重点不同。

本篇主要是 **友链扫描** 的开发记录。

<!-- more -->

友链扫描的基础网站选择的是 [生态环境部](http://www.mee.gov.cn/) 的网站，基础目标是找到所有省、地级市的生态环境数据源，最终目标是开发出具有泛化能力的友链扫描工具。

整个脚本的开发主要划分为3个阶段。

1. 分析
2. 开发(设计)
3. 归总

## 分析

分析主要是分析网站群的一些特性，比如网站的友链分布特征,链接的命名特征等。

具体来讲，就是我所需要的 *环境保护* 数据源友链都在某一个`a|li|option`标签群组中，并且名字中都会带有*环保*等标识字段。其中，前者是大部分友链的共性特征(可泛化)，后者是该任务的独有特征(不可泛化)。

除此之外，友链还有其他的特征，比如 **域名不同** 等。

这些特性都将用来制作 `过滤器` 。 过滤器的价值在于能够使用更少的请求次数获得同等价值的数据，简言之，提高爬虫的命中率。在这次的项目中，如果不使用这些过滤器，总共需要大约3万次的请求，得到的有效结果是447条，而使用这些过滤器之后总共的请求次数只需要4000+而已。

在完成了这些分析之后，就可以开始下一步的开发设计了。

## 开发(设计)

开发阶段又可以细分为几个步骤。

1. 整体设计
2. 对分析阶段得到的各种特性进行代码层面的抽象
3. 遍历算法
4. 深度过滤

### 整体设计